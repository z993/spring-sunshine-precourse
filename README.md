# spring-sunshine-precourse

# spring-sunshine-precourse


주어진 도시 이름을 입력받아 외부 REST API를 호출해 해당 도시의 날씨 정보를 조회하고,
이를 정리해 반환하는 간단한 웹 서비스를 스프링 프레임워크로 구현한다.
- 사용자는 도시 이름을 입력하면 해당 도시의 위도와 경도를 기반으로 날씨 정보를 조회할 수 있다.
- 최소 다섯 개 시앗으이 도시는 반드시 지원해야 한다. 
    e.g. Seoul, Tokyo, NewYork, Paris, London
- 도시 이름과 좌표를 매핑하는 자료 구조는 직접 설계한다.
- 서비스는 Open-Meteo API 를 호출하여 아래 정보를 조회한다.
  - 현재 온도
  - 체감 온도
  - 하늘 상태 (맑음, 흐림 등)
  - 습도
- 조회한 데이터를 기반으로 간단한 한 줄 요약 문장을 생성하는 기능을 추가한다.
    e.g. 현재 서울의 기온은 3.4°C이며, 풍속은 5.7m/s입니다. 날씨는 흐림입니다.

1. 자바 코드 컨벤션을 지킨다
- 기본적으로 Google Java Style Guide를 원칙으로한다.
- 단, 들여쓰기는 '2 Spaces'가 아닌 '4 Spaces'로 한다.
2. 들여쓰기 단게가 3을 넘지 않도록 구현한다. 2까지만 허용한다.
- 예를 들어, while문 안의 if 문은 들여쓰기 2이다.
- 들여쓰기 단계를 줄이는 방법으로 함수를 분리한다.
3. 함수(또는 메서드)의 길이가 15줄을 넘어가지 않도록 구현한다.
- 함수는 한 가지 일만 하도록 작성한다.
4. else 키워드를 쓰지 않는다.
- switch 문도 허용하지 않는다.
- else를 사용하지 않도록 하는 방법으로 if 문에서 값을 반환하는 방식을 사용한다.
5. 3항 연산자를 쓰지 않는다.
6. 테스트 코드는 JUnit5와 AssertJ로 작성한다.

날씨 조회 도메인 설계
- 도시 이름과 자표 매핑 구조 설계
- 도메인/DTO 정의

Open-Meteo API 연동용 클라이언트 구현
- Open-Meteo API 호출용 WebClient(interface, implement) 구현

WeatherService 구현
- 도시 이름(문자열)을 입력으로 받음
- 도시 -> 좌표 매핑 컴포넌트 활용 (없는 도시일 경우 예외처리)
- 위도/경도로 Open-Meteo 호출
- 응답 DTO에서 필요한 정보 추출
- 한 줄 요약 문장 생성

Rest Controller 구현

한 줄 요약 문장 생성 로직 세분화

테스트 코드 작성

예외/에러 처리 및 리팩터링



---
Open-Meteo에서 조회한 날씨 데이터를 입력으로 LLM API를 호출해 요약 생성 구현

사용자가 voice 입력하면 LLM API 호출, 입력이 없으면 기존 작성한 WeatherSummaryFormatter를 이용해 요약을 생성

사용자가 입력한 지역의 위도, 경도를 찾아서 Open-Meteo의 입력으로 사용하도록 구현

기온 구간에 따라서 WeatherClothMatcher를 참고해 복장을 추천한다.
WeatherClothMatcher에는 기온 구간별 옷차림이 정의되어있고 강수 여부에 따라 우산, 장화를 추가한다.

각 요청에 대해 사용량과 비용 추정치를 로그로 남긴다.
ex. 입력 토큰, 출력 토큰, 총 토큰, 모델명, 캐시 사용 여부, 추정 비용
